"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getExecutedProjectConfiguration = void 0;
const devkit_1 = require("@nx/devkit");
const getExecutedProjectConfiguration = (context) => {
    var _a, _b, _c;
    if (!context.projectName) {
        throw new Error('Project name must be set on executor context to run @nx-dotnet executors.');
    }
    if (!context.projectGraph &&
        !context.workspace &&
        !context.projectsConfigurations) {
        throw new Error('@nx-dotnet was unable to locate your projects configurations. ExecutorContext should contain projectGraph | workspace | projectsConfigurations');
    }
    const possibleConfigurations = [
        (_a = context.projectsConfigurations) === null || _a === void 0 ? void 0 : _a.projects[context.projectName],
        (_b = context.workspace) === null || _b === void 0 ? void 0 : _b.projects[context.projectName],
        (_c = context.projectGraph) === null || _c === void 0 ? void 0 : _c.nodes[context.projectName].data,
    ].filter((x) => !!x);
    if (possibleConfigurations.length === 0) {
        throw new Error((0, devkit_1.stripIndents) `@nx-dotnet was unable to determine your projects configuration
    ExecutorContext: ${JSON.stringify(context, null, 2)}`);
    }
    return possibleConfigurations[0];
};
exports.getExecutedProjectConfiguration = getExecutedProjectConfiguration;
//# sourceMappingURL=executors.js.map